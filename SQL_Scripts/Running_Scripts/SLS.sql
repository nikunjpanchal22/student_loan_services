DROP TABLE "USER"
/
CREATE TABLE "USER" (
    USER_ID NUMBER(10) GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY ,
    USER_NAME VARCHAR2(255),
    EMAIL VARCHAR2(255),
    PASSWORD VARCHAR2(255),
    PHONE_NUMBER NUMBER(10)
)
/
DROP TABLE APPLICANT
/
CREATE TABLE APPLICANT(
    APPLICANT_ID NUMBER(10) GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY ,
    USER_ID NUMBER(10),
    FIRST_NAME VARCHAR2(255),
    LAST_NAME VARCHAR2(255),
    DATE_OF_BIRTH DATE,
    ADDRESS VARCHAR2(255),
    EDUCATION_DETAILS VARCHAR2(255),
    MEMBERSHIP_TYPE VARCHAR2(255),
    FOREIGN KEY (USER_ID) REFERENCES "USER"(USER_ID)
)
/
ALTER TABLE APPLICANT ADD EMAIL VARCHAR2(255)
/
DROP TABLE BANK_ADMIN
/
CREATE TABLE BANK_ADMIN(
    ADMIN_ID NUMBER(10) GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY ,
    USER_ID NUMBER(10),
    AUTHORITY_LEVEL VARCHAR2(255),
    FOREIGN KEY (USER_ID) REFERENCES "USER"(USER_ID)
)
/
DROP TABLE BANK_REPRESENTATIVE
/
CREATE TABLE BANK_REPRESENTATIVE(
    EMPLOYEE_ID NUMBER(10) GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY ,
    USER_ID NUMBER(10),
    FOREIGN KEY (USER_ID) REFERENCES "USER"(USER_ID)
)
/
DROP TABLE LOAN_APPLICATION
/
CREATE TABLE LOAN_APPLICATION (
  APPLICATION_ID NUMBER(10) GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
  APPLICANT_ID NUMBER(10),
  GUARANTOR_NAME VARCHAR2(255),
  APPLICATION_DATE date,
  APPLICATION_STATUS VARCHAR2(255),
  LOAN_AMOUNT int,
  PURPOSE VARCHAR2(255),
  ASSIGNEE_ID NUMBER(10),
  FOREIGN KEY (APPLICANT_ID) REFERENCES APPLICANT(APPLICANT_ID)
)
/
DROP TABLE GUARANTOR
/
CREATE TABLE GUARANTOR (
  GURANTOR_ID NUMBER(10) GENERATED BY DEFAULT AS IDENTITY,
  APPLICANT_ID NUMBER(10),
  APPLICATION_ID NUMBER(10),
  NAME VARCHAR2(255),
  RELATIONSHIP VARCHAR2(255),
  OCCUPATION VARCHAR2(255),
  ANNUAL_INCOME NUMBER,
  ADDRESS VARCHAR2(255),
  UIN_NO VARCHAR2(255),
  MONTHLY_EXPENSE NUMBER,
  PRIMARY KEY (GURANTOR_ID, APPLICANT_ID, APPLICATION_ID),
  FOREIGN KEY (APPLICATION_ID) REFERENCES LOAN_APPLICATION(APPLICATION_ID),
  FOREIGN KEY (APPLICANT_ID) REFERENCES APPLICANT(APPLICANT_ID)
)
/
DROP TABLE LOAN_OFFER
/
CREATE TABLE LOAN_OFFER (
  OFFER_ID NUMBER(10) GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
  APPLICATION_ID NUMBER(10),
  SANCTIONED_AMOUNT NUMBER(10),
  INTEREST_RATE NUMBER(10, 5),
  OFFER_STATUS varchar(255),
  DISBURSED_DATE DATE,
  FOREIGN KEY (APPLICATION_ID) REFERENCES LOAN_APPLICATION(APPLICATION_ID)
)
/
CREATE TABLE APPLICANT_DRAFT(
    APPLICANT_ID NUMBER(10) GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY ,
    USER_ID NUMBER(10),
    FIRST_NAME VARCHAR2(255),
    LAST_NAME VARCHAR2(255),
    DATE_OF_BIRTH DATE,
    ADDRESS VARCHAR2(255),
    EDUCATION_DETAILS VARCHAR2(255),
    MEMBERSHIP_TYPE VARCHAR2(255)
)
/
ALTER TABLE APPLICANT_DRAFT ADD EMAIL VARCHAR2(255)
/
DROP TABLE Notification
/
CREATE TABLE Notification (
  notification_ID NUMBER(10) GENERATED BY DEFAULT AS IDENTITY,
  user_ID NUMBER(10),
  message varchar(255),
  timeStamp date,
  notification_Status varchar(255),
  sender_ID NUMBER(10),
  sender_type varchar2(255),
  PRIMARY KEY (notification_ID),
  FOREIGN KEY (user_ID) REFERENCES "USER"(user_ID)
)
/
DROP TABLE EXTERNAL_DB
/
CREATE TABLE EXTERNAL_DB(
    UIN_NO VARCHAR(255),
    ITR_NO VARCHAR(255),
    OCCUPATION VARCHAR(255),
    ANNUAL_INCOME NUMBER,
    SALARY_RECEIVED_DATE DATE,
    CREDIT_SCORE NUMBER,
    REPO_RATE NVARCHAR2(255),
    ITR_YEAR NUMBER(4),
    PRIMARY KEY (UIN_NO, ITR_NO)
)
/
INSERT INTO EXTERNAL_DB (UIN_NO, ITR_NO, OCCUPATION, annual_income, salary_received_date, credit_score, repo_rate, itr_year)
VALUES('5678EFGHI', '2024RE123', 'SALARIED', 3000000, '10-Nov-2024', 2.5, 2.5, 2024)
/
INSERT INTO EXTERNAL_DB (UIN_NO, ITR_NO, OCCUPATION, annual_income, salary_received_date, credit_score, repo_rate, itr_year)
VALUES('1234567AB', '2024T1234', 'BUSINESS', 2500000, '30-JAN-2023', 2.5, 2.5, 2023)
/
INSERT INTO EXTERNAL_DB (UIN_NO, ITR_NO, OCCUPATION, annual_income, salary_received_date, credit_score, repo_rate, itr_year)
VALUES('1234567AB', '2022TW123', 'BUSINESS', 2500000, '10-Nov-2022', 2.5, 2.5, 2022)
/
INSERT INTO BANK_ADMIN (USER_ID, AUTHORITY_LEVEL)
VALUES (141, 'Manager')
/
INSERT INTO GUARANTOR(APPLICANT_ID, APPLICATION_ID, NAME, RELATIONSHIP, OCCUPATION, ANNUAL_INCOME, ADDRESS, UIN_NO, monthly_expense)
VALUES(21, 1, 'Shiv', 'Uncle', 'Business', 2500000, 'MUMBAI', '1234567AB', 10000)
/
 
INSERT INTO GUARANTOR(APPLICANT_ID, APPLICATION_ID, NAME, RELATIONSHIP, OCCUPATION, ANNUAL_INCOME, ADDRESS, UIN_NO, monthly_expense)
VALUES(42, 61, 'Dhruv', 'Uncle', 'Salaried', 3000000, 'GUJARAT', '5678EFGHI', 15000)
/
COMMIT
/








